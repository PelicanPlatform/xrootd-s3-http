# Example XRootD configuration using AccHttpCallout authorization plugin
#
# This configuration demonstrates how to set up XRootD with HTTP-based
# authorization callouts to an external authorization service.

# Enable the HTTP protocol on port 1094
xrd.protocol http:1094 libXrdHttp.so

# Load the AccHttpCallout authorization plugin
acc.authlib libXrdAccHttpCallout.so

# Configure the authorization endpoint
# This is the URL of your authorization service that will receive HTTP GET requests
# with query parameters: ?path=<url-encoded-path>&verb=<HTTP-verb>
# The bearer token will be passed in the Authorization header
acchttpcallout.endpoint https://auth.example.com/api/v1/authorize

# Cache time-to-live for positive (authorized) responses in seconds
# Default: 60 seconds
# Increase this value to reduce load on your authorization service
acchttpcallout.cache_ttl_positive 120

# Cache time-to-live for negative (denied) responses in seconds
# Default: 30 seconds
# This prevents repeated unauthorized requests from overwhelming your service
acchttpcallout.cache_ttl_negative 60

# Passthrough behavior when authorization fails
# - true: Pass the request to the next configured authorization plugin
# - false (default): Immediately deny access on failure
acchttpcallout.passthrough false

# Logging verbosity
# Options: all, error, warning, info, debug, none
acchttpcallout.trace info

# Export paths that XRootD will serve
# Users can access files under these paths (subject to authorization)
all.export /store
all.export /data

# Optional: Disable async mode if needed
# (Some plugins may not work in async mode)
xrootd.async off

# Optional: Set the port for admin interface
# xrd.port 1094
